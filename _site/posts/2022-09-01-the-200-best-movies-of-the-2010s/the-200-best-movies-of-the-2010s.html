<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sandra Jurela">
<meta name="dcterms.date" content="2022-09-01">
<meta name="description" content="Scraping data on movies from Rotten Tomatoes for dashboard creation in Tableau">

<title>quarto-test - Scraping 200 Best Movies of 2010s from Rotten Tomatoes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../site_libs/datatables-binding-0.23/datatables.js"></script>
<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">quarto-test</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">Sandra Jurela</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Scraping 200 Best Movies of 2010s from Rotten Tomatoes</h1>
                  <div>
        <div class="description">
          Scraping data on movies from Rotten Tomatoes for dashboard creation in Tableau
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">web scraping</div>
                <div class="quarto-category">data wtangling</div>
                <div class="quarto-category">rvest</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Sandra Jurela </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 1, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of Contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#plan" id="toc-plan" class="nav-link" data-scroll-target="#plan">Plan</a></li>
  <li><a href="#scraping-data-from-the-main-page" id="toc-scraping-data-from-the-main-page" class="nav-link" data-scroll-target="#scraping-data-from-the-main-page">1. Scraping data from the main page</a></li>
  <li><a href="#scraping-data-for-the-first-movie-on-the-list" id="toc-scraping-data-for-the-first-movie-on-the-list" class="nav-link" data-scroll-target="#scraping-data-for-the-first-movie-on-the-list">2. Scraping data for the first movie on the list</a></li>
  <li><a href="#writing-a-function" id="toc-writing-a-function" class="nav-link" data-scroll-target="#writing-a-function">3. Writing a function</a></li>
  <li><a href="#iteration" id="toc-iteration" class="nav-link" data-scroll-target="#iteration">4. Iteration</a></li>
  <li><a href="#downloading-images" id="toc-downloading-images" class="nav-link" data-scroll-target="#downloading-images">5. Downloading images</a></li>
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link" data-scroll-target="#data-wrangling">6. Data wrangling</a></li>
  <li><a href="#tableau-dashboard" id="toc-tableau-dashboard" class="nav-link" data-scroll-target="#tableau-dashboard">7. Tableau dashboard</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>The goal of this project is to scrape data on the 200 best movies of the last decade from the <a href="https://editorial.rottentomatoes.com/guide/the-200-best-movies-of-the-2010s/">Rotten Tomatoes</a> website with the R <code>rvest</code> package, and finally create a dashboard in <code>Tableau</code>. The idea is to show all the movies in one place. Hovering over the movie should reveal relevant data in the tooltip for quick overview. Clicking on the movie should open the movie’s website for more information.</p>
<p>I’ve learned so much while working on this project (like web scraping, writing functions, iteration,…). The <code>purrr</code> package for functional programming is super-cool. It allows iteration with just one line of code (a very handy replacement for <code>for loops</code>).</p>
<p>I hope you’ll enjoy the process as much as I did. At times it was quite challenging, but that’s how we learn!</p>
<section id="setting-up-the-programming-environment" class="level4">
<h4 class="anchored" data-anchor-id="setting-up-the-programming-environment">Setting up the programming environment</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loading packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.3.6     ✔ purrr   0.3.4
✔ tibble  3.1.7     ✔ dplyr   1.0.9
✔ tidyr   1.2.0     ✔ stringr 1.5.0
✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'rvest' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'rvest'

The following object is masked from 'package:readr':

    guess_encoding</code></pre>
</div>
</div>
<p>Are we allowed to scrape data from the Rotten Tomatoes website?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>robotstxt<span class="sc">::</span><span class="fu">paths_allowed</span>(<span class="st">"https://www.rottentomatoes.com/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
 www.rottentomatoes.com                      </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
</section>
<section id="plan" class="level2">
<h2 class="anchored" data-anchor-id="plan">Plan</h2>
<p>The data will be scraped from <a href="https://editorial.rottentomatoes.com/guide/the-200-best-movies-of-the-2010s/">this page</a>. Since it doesn’t contain all the data I am interested in, I have to visit every movie’s web page on the list and scrape data from there. Here is the plan:</p>
<ol type="1">
<li><p>Scrape data from the main page: the <code>url</code>s of movies, and the <code>url</code>s of images.</p></li>
<li><p>Scrape <code>title</code>, <code>year_genre_runtime</code>, <code>critics_score</code>, <code>audiaece_score</code>, and <code>synopsis</code> from the first movie to develop the code.</p></li>
<li><p>Write a function that scrapes data based on movie’s URL.</p></li>
<li><p>Iteration - use this function to scrape data from each individual movie and create a data frame with the columns <code>title</code>, <code>year_genre_runtime</code>, <code>critics_score</code>, <code>audiaece_score</code>, <code>synopsis</code>, and <code>url</code>.</p></li>
<li><p>Download images</p></li>
<li><p>Wrangle data</p></li>
<li><p>Create a dashboard in Tableau</p></li>
</ol>
</section>
<section id="scraping-data-from-the-main-page" class="level2">
<h2 class="anchored" data-anchor-id="scraping-data-from-the-main-page">1. Scraping data from the main page</h2>
<p>Read the main page with <code>read_html()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>main_url <span class="ot">&lt;-</span> <span class="st">"https://editorial.rottentomatoes.com/guide/the-200-best-movies-of-the-2010s/"</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>main_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(main_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/img1.jpg" class="img-fluid figure-img" width="730"></p>
<p></p><figcaption class="figure-caption">The main page</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>I make use of the <code>SelectorGadget</code> to identify the tags for the relevant nodes. Here is the <a href="https://chrome.google.com/webstore/detail/selectorgadget/mhjhnkcfbdhnjickkkdbjoemdmbfginb">link</a> for Chrome (recommended).</p>
<p><strong>Extract <code>url</code>s of movies</strong></p>
<p>The same nodes that contain the text for the titles also contain information on the links to individual movie pages for each title. We can extract this information using the <code>html_attr()</code> function, which extracts attributes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>movie_urls <span class="ot">&lt;-</span> main_page <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">".article_movie_title a"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">"href"</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>movie_urls <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://www.rottentomatoes.com/m/12_years_a_slave"    
[2] "https://www.rottentomatoes.com/m/20_feet_from_stardom"
[3] "https://www.rottentomatoes.com/m/45_years"            
[4] "https://www.rottentomatoes.com/m/all_is_lost_2013"    
[5] "https://www.rottentomatoes.com/m/amazing_grace_2018"  
[6] "https://www.rottentomatoes.com/m/american_hustle"     </code></pre>
</div>
</div>
<p><strong>Extract <code>url</code>s of images</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>image_urls <span class="ot">&lt;-</span> main_page <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_nodes</span>(<span class="st">".article_poster"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">"src"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check the image for the 6th title.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(image_urls[<span class="dv">6</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="https://resizing.flixster.com/5RRz_ps7sPP4cWIxG3nYebujtg4=/fit-in/180x240/v2/https://flxt.tmsimg.com/assets/p10016553_p_v10_al.jpg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="scraping-data-for-the-first-movie-on-the-list" class="level2">
<h2 class="anchored" data-anchor-id="scraping-data-for-the-first-movie-on-the-list">2. Scraping data for the first movie on the list</h2>
<p>I am going to scrape data for the movie <em>12 Years a Slave</em> in order to develop the code.</p>
<p>Read page for the first movie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.rottentomatoes.com/m/12_years_a_slave"</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>movie_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/img2.jpg" class="img-fluid figure-img" width="828"></p>
<p></p><figcaption class="figure-caption">Title, year, genre, runtime, critics and audience score</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Scroll down the page and you’ll find the movie synopsis.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/img3.jpg" class="img-fluid figure-img" width="837"></p>
<p></p><figcaption class="figure-caption">Synopsis</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>Extract <code>title</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>title <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".scoreboard__title"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>title</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "12 Years a Slave"</code></pre>
</div>
</div>
<p><strong>Extract <code>year</code>, <code>genre</code>, and <code>runtime</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>year_genre_runtime <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".scoreboard__info"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>year_genre_runtime</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2013, History/Drama, 2h 14m"</code></pre>
</div>
</div>
<p><strong>Extract <code>critics score</code></strong></p>
<p>The next two are tricky. I had to look at the page source and find them manually.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>critics_score <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_element</span>(<span class="st">"score-board"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">"tomatometerscore"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(.,<span class="st">"%"</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>critics_score</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "95%"</code></pre>
</div>
</div>
<p><strong>Extract <code>audience score</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>audience_score <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_element</span>(<span class="st">"score-board"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_attr</span>(<span class="st">"audiencescore"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_c</span>(.,<span class="st">"%"</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>audience_score</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "90%"</code></pre>
</div>
</div>
<p><strong>Extract movie <code>synopsis</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>synopsis <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">"#movieSynopsis"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text2</span>()</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>synopsis</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "In the years before the Civil War, Solomon Northup (Chiwetel Ejiofor), a free black man from upstate New York, is kidnapped and sold into slavery in the South. Subjected to the cruelty of one malevolent owner (Michael Fassbender), he also finds unexpected kindness from another, as he struggles continually to survive and maintain some of his dignity. Then in the 12th year of the disheartening ordeal, a chance meeting with an abolitionist from Canada changes Solomon's life forever."</code></pre>
</div>
</div>
<p><strong>Making a data frame of extracted elements</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>movie  <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">title =</span> title, </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">year_genre_runtime =</span> year_genre_runtime,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">critics_score =</span> critics_score,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">audience_score =</span> audience_score,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">synopsis =</span> synopsis,  </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">url =</span> url)</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>movie <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1
Columns: 6
$ title              &lt;chr&gt; "12 Years a Slave"
$ year_genre_runtime &lt;chr&gt; "2013, History/Drama, 2h 14m"
$ critics_score      &lt;chr&gt; "95%"
$ audience_score     &lt;chr&gt; "90%"
$ synopsis           &lt;chr&gt; "In the years before the Civil War, Solomon Northup…
$ url                &lt;chr&gt; "https://www.rottentomatoes.com/m/12_years_a_slave"</code></pre>
</div>
</div>
</section>
<section id="writing-a-function" class="level2">
<h2 class="anchored" data-anchor-id="writing-a-function">3. Writing a function</h2>
<p>Instead of manually scraping individual movies, I’ll write a function to do the same.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>scrape_movie <span class="ot">&lt;-</span> <span class="cf">function</span>(x, ...){</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  movie_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(x)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  title <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_node</span>(<span class="st">".scoreboard__title"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  year_genre_runtime <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_node</span>(<span class="st">".scoreboard__info"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>()</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  critics_score <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_element</span>(<span class="st">"score-board"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_attr</span>(<span class="st">"tomatometerscore"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_c</span>(.,<span class="st">"%"</span>)</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>  audience_score <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_element</span>(<span class="st">"score-board"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_attr</span>(<span class="st">"audiencescore"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_c</span>(.,<span class="st">"%"</span>)</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>  synopsis <span class="ot">&lt;-</span> movie_page <span class="sc">%&gt;%</span> </span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_node</span>(<span class="st">"#movieSynopsis"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text2</span>()</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>  movie_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">title =</span> title, </span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>                     <span class="at">year_genre_runtime =</span> year_genre_runtime,</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>                     <span class="at">critics_score =</span> critics_score,</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>                     <span class="at">audience_score =</span> audience_score,</span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>                     <span class="at">synopsis =</span> synopsis,</span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>                     <span class="at">url =</span> x)</span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(movie_df)</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Function in action</strong></p>
<p>Now that we have the <code>scrape_movie()</code> function, let’s scrape data for the movie “American Hustle”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scrape_movie</span>(movie_urls[<span class="dv">6</span>]) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1
Columns: 6
$ title              &lt;chr&gt; "American Hustle"
$ year_genre_runtime &lt;chr&gt; "2013, Crime/Drama, 2h 18m"
$ critics_score      &lt;chr&gt; "92%"
$ audience_score     &lt;chr&gt; "74%"
$ synopsis           &lt;chr&gt; "Irving Rosenfeld (Christian Bale) dabbles in forge…
$ url                &lt;chr&gt; "https://www.rottentomatoes.com/m/american_hustle"</code></pre>
</div>
</div>
<p>Or “Ex Machina”, another great movie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">scrape_movie</span>(movie_urls[<span class="dv">53</span>]) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1
Columns: 6
$ title              &lt;chr&gt; "Ex Machina"
$ year_genre_runtime &lt;chr&gt; "2014, Sci-fi/Mystery &amp; thriller, 1h 47m"
$ critics_score      &lt;chr&gt; "92%"
$ audience_score     &lt;chr&gt; "86%"
$ synopsis           &lt;chr&gt; "Caleb Smith (Domhnall Gleeson) a programmer at a h…
$ url                &lt;chr&gt; "https://www.rottentomatoes.com/m/ex_machina"</code></pre>
</div>
</div>
</section>
<section id="iteration" class="level2">
<h2 class="anchored" data-anchor-id="iteration">4. Iteration</h2>
<p>To make my workflow a little more efficient, I make use of the <code>map_dfr()</code> function from the <code>purrr</code> package to iterate over all movie pages. <code>map_dfr()</code> will apply the <code>scrape_movie()</code>function to each element in the vector of links, and return a data frame created by row-binding.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>movies <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(movie_urls, scrape_movie)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>movies <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  title                year_genre_runtime          criti…¹ audie…² synop…³ url  
  &lt;chr&gt;                &lt;chr&gt;                       &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;
1 12 Years a Slave     2013, History/Drama, 2h 14m 95%     90%     In the… http…
2 20 Feet From Stardom 2013, Documentary, 1h 30m   99%     82%     Filmma… http…
3 45 Years             2015, Drama, 1h 33m         97%     67%     As the… http…
4 All Is Lost          2013, Adventure/Mystery &amp; … 94%     64%     During… http…
5 Amazing Grace        2018, Documentary/Music, 1… 99%     80%     Singer… http…
6 American Hustle      2013, Crime/Drama, 2h 18m   92%     74%     Irving… http…
# … with abbreviated variable names ¹​critics_score, ²​audience_score, ³​synopsis</code></pre>
</div>
</div>
</section>
<section id="downloading-images" class="level2">
<h2 class="anchored" data-anchor-id="downloading-images">5. Downloading images</h2>
<p>I’ve already extracted urls of images in the step 1 and saved them to <code>image_urls</code>. Now I’m going to create a directory and directory paths for the images.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_create</span>(<span class="st">"images/top_200_images/"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>paths <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">str_c</span>(<span class="st">"images/top_200_images/"</span>, <span class="fu">sprintf</span>(<span class="st">"%0.3d"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">200</span>), <span class="st">".jpg"</span>))</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>paths <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "images/top_200_images/001.jpg" "images/top_200_images/002.jpg"
[3] "images/top_200_images/003.jpg" "images/top_200_images/004.jpg"
[5] "images/top_200_images/005.jpg" "images/top_200_images/006.jpg"</code></pre>
</div>
</div>
<p><strong>Download images</strong></p>
<p>This time I’ll use <code>map2()</code> function from the <code>purrr</code> package, It will apply the <code>download.file()</code> function to pairs of elements from two vectors, <code>image_urls</code> and <code>paths</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map2</span>(image_urls, paths, <span class="cf">function</span>(.x, .y) <span class="fu">download.file</span>(.x, .y, <span class="at">mode=</span><span class="st">"wb"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Are the images properly saved? Let’s read in the image for the first movie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"images/top_200_images/001.jpg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="https://resizing.flixster.com/omz-ZW3ToC8rY90ysUItce6Y1T0=/fit-in/180x240/v2/https://flxt.tmsimg.com/assets/p10029562_p_v8_ac.jpg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="data-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling">6. Data wrangling</h2>
<p>Preparing the final dataset to be used in Tableau.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>movies <span class="ot">&lt;-</span> movies <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># separate year_genre_runtime column into year, genre, and runtime</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(year_genre_runtime, <span class="at">sep =</span> <span class="st">", "</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"genre"</span>, <span class="st">"runtime"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.factor</span>(year)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># separate genre column into primary and secondary genre</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(genre, <span class="at">sep =</span> <span class="st">"/"</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"genre_1"</span>, <span class="st">"genre_2"</span>), <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create id column with leading zeroes so Tableau can automatically match the images</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">sprintf</span>(<span class="st">"%0.3d"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">200</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 2 pieces. Missing pieces filled with `NA` in 38 rows [2,
3, 25, 29, 36, 43, 46, 55, 63, 65, 80, 84, 95, 101, 103, 104, 110, 113, 114,
115, ...].</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>movies <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  id    title  year  genre genre_1 genre_2 runtime criti…¹ audie…² synop…³ url  
  &lt;chr&gt; &lt;chr&gt;  &lt;fct&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;
1 001   12 Ye… 2013  Hist… History Drama   2h 14m  95%     90%     In the… http…
2 002   20 Fe… 2013  Docu… Docume… &lt;NA&gt;    1h 30m  99%     82%     Filmma… http…
3 003   45 Ye… 2015  Drama Drama   &lt;NA&gt;    1h 33m  97%     67%     As the… http…
4 004   All I… 2013  Adve… Advent… Myster… 1h 45m  94%     64%     During… http…
5 005   Amazi… 2018  Docu… Docume… Music   1h 27m  99%     80%     Singer… http…
6 006   Ameri… 2013  Crim… Crime   Drama   2h 18m  92%     74%     Irving… http…
# … with abbreviated variable names ¹​critics_score, ²​audience_score, ³​synopsis</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of unique values in genre column</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>movies<span class="sc">$</span>genre <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 59</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unique values in genre_1</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>movies<span class="sc">$</span>genre_1 <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "History"            "Documentary"        "Drama"             
 [4] "Adventure"          "Crime"              "Comedy"            
 [7] "Action"             "Sci-fi"             "Romance"           
[10] "Horror"             "Biography"          "Mystery &amp; thriller"
[13] "Kids &amp; family"      "War"                "Fantasy"           
[16] "Musical"            "Western"           </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unique values in genre_2</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>movies<span class="sc">$</span>genre_2 <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Drama"              NA                   "Mystery &amp; thriller"
 [4] "Music"              "Biography"          "Adventure"         
 [7] "History"            "Romance"            "Comedy"            
[10] "Lgbtq+"             "Action"             "War"               
[13] "Fantasy"            "Sci-fi"             "Crime"             
[16] "Musical"            "Western"            "Anime"             
[19] "Horror"            </code></pre>
</div>
</div>
<p>Finding values in <code>genre_2</code>, that are not in <code>genre_1</code>. This will help when creating a list parameter for filtering by primary or secondary genre.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(movies<span class="sc">$</span>genre_2, movies<span class="sc">$</span>genre_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA       "Music"  "Lgbtq+" "Anime" </code></pre>
</div>
</div>
<section id="dt-table" class="level4">
<h4 class="anchored" data-anchor-id="dt-table">DT table</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>movies <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="htmlwidget-3c44efe9e62d709ac6be" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3c44efe9e62d709ac6be">{"x":{"filter":"none","vertical":false,"data":[["001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200"],["12 Years a Slave","20 Feet From Stardom","45 Years","All Is Lost","Amazing Grace","American Hustle","Amy","Anomalisa","Ant-Man and The Wasp","Apollo 11","Argo","Arrival","Ash Is Purest White","The Artist","Avengers: Endgame","Avengers: Infinity War","The Babadook","Baby Driver","A Beautiful Day in the Neighborhood","Before Midnight","The Big Sick","Birdman or (The Unexpected Virtue of Ignorance)","Birds of Passage","Black Panther","Blackfish","BlacKkKlansman","Blade Runner 2049","Booksmart","Boyhood","BPM (Beats Per Minute)","Bridge of Spies","Brooklyn","Bumblebee","Burning","Call Me by Your Name","Cameraperson","Can You Ever Forgive Me?","Captain America: Civil War","Captain Phillips","Carol","Coco","Crazy Rich Asians","Creed","Dallas Buyers Club","Dawn of the Planet of the Apes","The Death of Stalin","The Disaster Artist","Doctor Strange","Dolemite Is My Name","Don't Think Twice","Dunkirk","Eighth Grade","Ex Machina","Eye in the Sky","Faces Places","A Fantastic Woman","The Farewell","The Favourite","Fighting With My Family","Finding Dory","First Man","First Reformed","The Florida Project","Ford v Ferrari","Free Solo","Get Out","A Ghost Story","Gloria","The Grand Budapest Hotel","Gravity","Guardians of the Galaxy","The Guilty","The Handmaiden","Harry Potter and the Deathly Hallows: Part 2","The Hate U Give","Hell or High Water","Her","Hereditary","Hidden Figures","Honeyland","How to Train Your Dragon","Hunt for the Wilderpeople","Hustlers","I Am Not Your Negro","I, Tonya","If Beale Street Could Talk","Incredibles 2","Inside Llewyn Davis","Inside Out","The Irishman","Isle of Dogs","It Follows","John Wick: Chapter 3 -- Parabellum","The Jungle Book","Kedi","The King's Speech","Knives Out","Kubo and the Two Strings","La La Land","Lady Bird","Leave No Trace","The LEGO Movie","Leviathan","Life Itself","The Lighthouse","Edge of Tomorrow","Logan","Logan Lucky","Looper","Love &amp; Friendship","Lucky","Mad Max: Fury Road","Maiden","Manchester by the Sea","Marriage Story","The Martian","Marvel's the Avengers","McQueen","Minding the Gap","Mission: Impossible -- Fallout","Mission: Impossible Rogue Nation","Moana","Moonlight","Mr. Turner","Mud","Mudbound","Mustang","My Life as a Zucchini","The Nice Guys","Nightcrawler","The Old Man &amp; the Gun","Once Upon a Time... In Hollywood","Paddington","Paddington 2","Pain and Glory","Parasite","Paterson","The Peanut Butter Falcon","Phantom Thread","Phoenix","Portrait of a Lady on Fire","The Post","A Quiet Place","Rocketman","Roma","Room","The Rider","The Salesman","Searching","Selma","A Separation","The Shape of Water","Shaun the Sheep Movie","Shazam!","Shoplifters","Short Term 12","Sicario","Sing Street","Skyfall","Snowpiercer","The Social Network","Son of Saul","Sorry to Bother You","Spider-Man: Far From Home","Spider-Man: Homecoming","Spider-Man: Into the Spider-Verse","Spotlight","Spy","Stan &amp; Ollie","A Star Is Born","Star Wars: The Force Awakens","Star Wars: The Last Jedi","Starred Up","Summer 1993","The Tale of the Princess Kaguya","They Shall Not Grow Old","Things to Come","Thor: Ragnarok","Three Billboards Outside Ebbing, Missouri","Three Identical Strangers","Tower","Toy Story 3","Toy Story 4","True Grit","Two Days One Night","Us","Wadjda","War for the Planet of the Apes","Weiner","What We Do in the Shadows","Whiplash","Widows","The Witch","Wildlife","Won't You Be My Neighbor?","Wonder Woman","X-Men: Days of Future Past","Your Name","Zero Dark Thirty","Zootopia"],["2013","2013","2015","2013","2018","2013","2015","2015","2018","2019","2012","2016","2018","2011","2019","2018","2014","2017","2019","2013","2017","2014","2018","2018","2013","2018","2017","2019","2014","2017","2015","2015","2018","2018","2017","2016","2018","2016","2013","2015","2017","2018","2015","2013","2014","2017","2017","2016","2019","2016","2017","2018","2014","2015","2017","2017","2019","2018","2019","2016","2018","2017","2017","2019","2018","2017","2017","2013","2014","2013","2014","2018","2016","2011","2018","2016","2013","2018","2016","2019","2010","2016","2019","2016","2017","2018","2018","2013","2015","2019","2018","2014","2019","2016","2016","2010","2019","2016","2016","2017","2018","2014","2014","2014","2019","2014","2017","2017","2012","2016","2017","2015","2018","2016","2019","2015","2012","2018","2018","2018","2015","2016","2016","2014","2013","2017","2015","2016","2016","2014","2018","2019","2014","2017","2019","2019","2016","2019","2017","2014","2019","2017","2018","2019","2018","2015","2017","2016","2018","2014","2011","2017","2015","2019","2018","2013","2015","2016","2012","2013","2010","2015","2018","2019","2017","2018","2015","2015","2018","2018","2015","2017","2013","2017","2013","2018","2016","2017","2017","2018","2016","2010","2019","2010","2014","2019","2012","2017","2016","2014","2014","2018","2015","2018","2018","2017","2014","2016","2012","2016"],["History/Drama","Documentary","Drama","Adventure/Mystery &amp; thriller","Documentary/Music","Crime/Drama","Documentary/Biography","Comedy/Drama","Action/Adventure","Documentary/History","History/Drama","Sci-fi/Mystery &amp; thriller","Drama/Romance","Romance/Comedy","Action/Adventure","Action/Adventure","Horror/Mystery &amp; thriller","Action/Mystery &amp; thriller","Biography/Drama","Romance/Drama","Romance/Comedy","Comedy/Drama","Crime/Drama","Action/Adventure","Documentary","Comedy/Drama","Sci-fi/Mystery &amp; thriller","Comedy/Lgbtq+","Drama","Drama/Lgbtq+","History/Drama","Romance/History","Action/Adventure","Mystery &amp; thriller/Drama","Romance/Drama","Documentary","Biography/Comedy","Action/Adventure","Drama/Action","Romance/Drama","Kids &amp; family/Comedy","Romance/Comedy","Drama","Drama/Lgbtq+","Sci-fi/Action","Comedy","Comedy/Drama","Action/Adventure","Biography/Comedy","Comedy/Drama","War/History","Comedy/Drama","Sci-fi/Mystery &amp; thriller","Mystery &amp; thriller/War","Documentary","Drama/Lgbtq+","Comedy/Drama","Comedy/Drama","Comedy/Drama","Kids &amp; family/Comedy","Biography/History","Mystery &amp; thriller/Drama","Drama","History/Drama","Documentary","Horror/Mystery &amp; thriller","Drama/Fantasy","Drama/Romance","Comedy/Drama","Drama/Sci-fi","Sci-fi/Adventure","Mystery &amp; thriller/Crime","Mystery &amp; thriller/Drama","Fantasy/Adventure","Crime/Drama","Crime/Drama","Comedy/Drama","Horror/Mystery &amp; thriller","History/Drama","Documentary","Kids &amp; family/Fantasy","Comedy/Adventure","Comedy/Drama","Documentary","Biography/Comedy","Crime/Drama","Kids &amp; family/Comedy","Drama/Comedy","Kids &amp; family/Comedy","Crime/Drama","Comedy/Adventure","Horror/Mystery &amp; thriller","Action/Mystery &amp; thriller","Kids &amp; family/Adventure","Documentary","History/Drama","Mystery &amp; thriller/Comedy","Kids &amp; family/Fantasy","Musical/Romance","Comedy/Drama","Drama","Kids &amp; family/Comedy","Drama","Documentary","Mystery &amp; thriller/Drama","Sci-fi/Action","Action/Adventure","Comedy/Crime","Sci-fi/Action","Comedy","Comedy/Drama","Action/Adventure","Documentary","Drama","Drama","Sci-fi/Adventure","Action/Adventure","Documentary","Documentary","Action/Adventure","Action/Adventure","Kids &amp; family/Musical","Drama/Lgbtq+","Biography/History","Drama/Adventure","History/Drama","Drama","Comedy/Drama","Action/Comedy","Mystery &amp; thriller/Crime","Comedy/Drama","Comedy/Drama","Kids &amp; family/Comedy","Kids &amp; family/Comedy","Drama","Comedy/Mystery &amp; thriller","Comedy/Drama","Comedy/Drama","Drama/Romance","History/Drama","Romance/History","History/Drama","Horror/Mystery &amp; thriller","Musical/Biography","Drama","Drama","Drama/Western","Drama/Mystery &amp; thriller","Mystery &amp; thriller","History/Drama","Drama","Fantasy/Romance","Kids &amp; family/Comedy","Action/Adventure","Crime/Drama","Drama","Mystery &amp; thriller/Crime","Comedy/Drama","Action/Adventure","Sci-fi/Action","Drama/Biography","History/Drama","Comedy/Fantasy","Action/Adventure","Action/Adventure","Kids &amp; family/Action","Drama","Comedy/Action","Biography/Comedy","Romance/Drama","Sci-fi/Adventure","Sci-fi/Adventure","Crime/Drama","Drama","Fantasy/Anime","Documentary/History","Drama","Action/Adventure","Crime/Drama","Documentary/Biography","Documentary","Kids &amp; family/Comedy","Kids &amp; family/Comedy","Western/Drama","Drama","Horror/Mystery &amp; thriller","Drama","Sci-fi/Action","Documentary","Comedy/Horror","Drama/Music","Mystery &amp; thriller/Crime","Horror/History","Drama","Documentary","Action/Adventure","Action/Adventure","Fantasy/Romance","Drama/Mystery &amp; thriller","Kids &amp; family/Comedy"],["History","Documentary","Drama","Adventure","Documentary","Crime","Documentary","Comedy","Action","Documentary","History","Sci-fi","Drama","Romance","Action","Action","Horror","Action","Biography","Romance","Romance","Comedy","Crime","Action","Documentary","Comedy","Sci-fi","Comedy","Drama","Drama","History","Romance","Action","Mystery &amp; thriller","Romance","Documentary","Biography","Action","Drama","Romance","Kids &amp; family","Romance","Drama","Drama","Sci-fi","Comedy","Comedy","Action","Biography","Comedy","War","Comedy","Sci-fi","Mystery &amp; thriller","Documentary","Drama","Comedy","Comedy","Comedy","Kids &amp; family","Biography","Mystery &amp; thriller","Drama","History","Documentary","Horror","Drama","Drama","Comedy","Drama","Sci-fi","Mystery &amp; thriller","Mystery &amp; thriller","Fantasy","Crime","Crime","Comedy","Horror","History","Documentary","Kids &amp; family","Comedy","Comedy","Documentary","Biography","Crime","Kids &amp; family","Drama","Kids &amp; family","Crime","Comedy","Horror","Action","Kids &amp; family","Documentary","History","Mystery &amp; thriller","Kids &amp; family","Musical","Comedy","Drama","Kids &amp; family","Drama","Documentary","Mystery &amp; thriller","Sci-fi","Action","Comedy","Sci-fi","Comedy","Comedy","Action","Documentary","Drama","Drama","Sci-fi","Action","Documentary","Documentary","Action","Action","Kids &amp; family","Drama","Biography","Drama","History","Drama","Comedy","Action","Mystery &amp; thriller","Comedy","Comedy","Kids &amp; family","Kids &amp; family","Drama","Comedy","Comedy","Comedy","Drama","History","Romance","History","Horror","Musical","Drama","Drama","Drama","Drama","Mystery &amp; thriller","History","Drama","Fantasy","Kids &amp; family","Action","Crime","Drama","Mystery &amp; thriller","Comedy","Action","Sci-fi","Drama","History","Comedy","Action","Action","Kids &amp; family","Drama","Comedy","Biography","Romance","Sci-fi","Sci-fi","Crime","Drama","Fantasy","Documentary","Drama","Action","Crime","Documentary","Documentary","Kids &amp; family","Kids &amp; family","Western","Drama","Horror","Drama","Sci-fi","Documentary","Comedy","Drama","Mystery &amp; thriller","Horror","Drama","Documentary","Action","Action","Fantasy","Drama","Kids &amp; family"],["Drama",null,null,"Mystery &amp; thriller","Music","Drama","Biography","Drama","Adventure","History","Drama","Mystery &amp; thriller","Romance","Comedy","Adventure","Adventure","Mystery &amp; thriller","Mystery &amp; thriller","Drama","Drama","Comedy","Drama","Drama","Adventure",null,"Drama","Mystery &amp; thriller","Lgbtq+",null,"Lgbtq+","Drama","History","Adventure","Drama","Drama",null,"Comedy","Adventure","Action","Drama","Comedy","Comedy",null,"Lgbtq+","Action",null,"Drama","Adventure","Comedy","Drama","History","Drama","Mystery &amp; thriller","War",null,"Lgbtq+","Drama","Drama","Drama","Comedy","History","Drama",null,"Drama",null,"Mystery &amp; thriller","Fantasy","Romance","Drama","Sci-fi","Adventure","Crime","Drama","Adventure","Drama","Drama","Drama","Mystery &amp; thriller","Drama",null,"Fantasy","Adventure","Drama",null,"Comedy","Drama","Comedy","Comedy","Comedy","Drama","Adventure","Mystery &amp; thriller","Mystery &amp; thriller","Adventure",null,"Drama","Comedy","Fantasy","Romance","Drama",null,"Comedy",null,null,"Drama","Action","Adventure","Crime","Action",null,"Drama","Adventure",null,null,null,"Adventure","Adventure",null,null,"Adventure","Adventure","Musical","Lgbtq+","History","Adventure","Drama",null,"Drama","Comedy","Crime","Drama","Drama","Comedy","Comedy",null,"Mystery &amp; thriller","Drama","Drama","Romance","Drama","History","Drama","Mystery &amp; thriller","Biography",null,null,"Western","Mystery &amp; thriller",null,"Drama",null,"Romance","Comedy","Adventure","Drama",null,"Crime","Drama","Adventure","Action","Biography","Drama","Fantasy","Adventure","Adventure","Action",null,"Action","Comedy","Drama","Adventure","Adventure","Drama",null,"Anime","History",null,"Adventure","Drama","Biography",null,"Comedy","Comedy","Drama",null,"Mystery &amp; thriller",null,"Action",null,"Horror","Music","Crime","History",null,null,"Adventure","Adventure","Romance","Mystery &amp; thriller","Comedy"],["2h 14m","1h 30m","1h 33m","1h 45m","1h 27m","2h 18m","2h 8m","1h 30m","1h 58m","1h 33m","2h 0m","1h 56m","2h 21m","1h 40m","3h 1m","2h 29m","1h 33m","1h 53m","1h 47m","1h 49m","2h 0m","1h 59m","2h 5m","2h 14m","1h 23m","2h 14m","2h 44m","1h 42m","2h 45m","2h 23m","2h 21m","1h 52m","1h 54m","2h 28m","2h 12m","1h 42m","1h 46m","2h 26m","2h 13m","1h 58m","1h 49m","2h 0m","2h 13m","1h 57m","2h 10m","1h 47m","1h 43m","1h 55m","1h 58m","1h 28m","1h 47m","1h 33m","1h 47m","1h 42m","1h 29m","1h 43m","1h 40m","2h 0m","1h 47m","1h 43m","2h 21m","1h 53m","1h 55m","2h 32m","1h 40m","1h 44m","1h 30m","1h 49m","1h 39m","1h 31m","2h 1m","1h 25m","2h 24m","2h 11m","2h 13m","1h 37m","1h 59m","2h 7m","2h 7m","1h 25m","1h 38m","1h 41m","1h 50m","1h 35m","2h 1m","1h 59m","1h 58m","1h 44m","1h 35m","3h 29m","1h 41m","1h 41m","2h 11m","1h 45m","1h 20m","1h 58m","2h 10m","1h 42m","2h 8m","1h 34m","1h 48m","1h 35m","2h 22m","2h 0m","1h 50m","1h 53m","2h 17m","1h 59m","1h 59m","1h 33m","1h 28m","2h 0m","1h 33m","2h 17m","2h 16m","2h 22m","2h 23m","1h 51m","1h 33m","2h 27m","2h 11m","1h 53m","1h 51m","2h 29m","2h 10m","2h 14m","1h 37m","1h 6m","1h 56m","1h 57m","1h 33m","2h 39m","1h 35m","1h 43m","1h 53m","2h 12m","1h 58m","1h 36m","2h 10m","1h 38m","2h 1m","1h 55m","1h 30m","2h 1m","2h 15m","1h 58m","1h 44m","2h 5m","1h 42m","2h 8m","2h 3m","2h 3m","1h 25m","2h 12m","2h 1m","1h 36m","2h 1m","1h 46m","2h 23m","2h 5m","2h 0m","1h 47m","1h 45m","2h 9m","2h 13m","1h 57m","2h 8m","1h 55m","1h 37m","2h 15m","2h 16m","2h 32m","1h 40m","1h 38m","2h 17m","1h 39m","1h 41m","2h 10m","1h 55m","1h 36m","1h 38m","1h 42m","1h 40m","1h 50m","1h 35m","1h 56m","1h 38m","2h 22m","1h 36m","1h 26m","1h 46m","2h 8m","1h 32m","1h 44m","1h 34m","2h 21m","2h 11m","1h 46m","2h 37m","1h 48m"],["95%","99%","97%","94%","99%","92%","95%","91%","87%","99%","96%","95%","99%","95%","94%","85%","98%","92%","95%","98%","98%","91%","96%","96%","98%","96%","88%","96%","97%","99%","91%","97%","91%","95%","94%","99%","98%","90%","93%","94%","97%","91%","95%","92%","91%","94%","91%","89%","97%","98%","92%","99%","92%","95%","99%","94%","97%","93%","93%","94%","87%","94%","96%","92%","98%","98%","91%","100%","92%","96%","92%","98%","96%","96%","97%","97%","94%","90%","93%","100%","99%","97%","87%","99%","90%","95%","93%","92%","98%","95%","90%","95%","89%","94%","98%","94%","97%","97%","91%","99%","100%","96%","97%","98%","90%","91%","94%","92%","93%","96%","97%","97%","98%","96%","95%","91%","91%","99%","100%","97%","94%","95%","98%","97%","97%","97%","97%","99%","91%","95%","93%","85%","97%","99%","96%","99%","96%","95%","91%","98%","97%","88%","96%","89%","96%","93%","97%","96%","92%","99%","99%","92%","99%","90%","99%","98%","92%","95%","92%","94%","96%","96%","93%","90%","92%","97%","97%","95%","92%","90%","93%","91%","99%","100%","100%","99%","99%","93%","90%","96%","99%","98%","97%","95%","97%","93%","99%","94%","97%","96%","94%","91%","90%","94%","97%","93%","90%","98%","91%","98%"],["90%","82%","67%","64%","80%","74%","87%","71%","80%","90%","90%","82%","69%","87%","90%","92%","72%","86%","92%","82%","88%","78%","85%","79%","90%","83%","82%","77%","80%","84%","87%","87%","74%","80%","86%","69%","81%","89%","89%","74%","94%","76%","89%","91%","88%","78%","85%","86%","91%","69%","81%","82%","86%","82%","89%","77%","87%","70%","86%","84%","67%","69%","80%","98%","93%","86%","66%","65%","86%","79%","92%","87%","91%","89%","82%","88%","82%","69%","93%","86%","91%","91%","65%","83%","88%","71%","84%","74%","89%","86%","87%","66%","86%","86%","85%","92%","92%","86%","81%","79%","80%","87%","80%","88%","72%","90%","90%","76%","82%","59%","81%","86%","97%","78%","85%","91%","91%","79%","91%","88%","87%","89%","79%","56%","80%","85%","88%","89%","79%","86%","62%","70%","80%","88%","91%","90%","72%","96%","71%","78%","92%","73%","83%","88%","72%","93%","82%","84%","87%","86%","92%","72%","81%","82%","91%","92%","85%","92%","86%","73%","87%","80%","70%","95%","87%","93%","93%","78%","83%","80%","85%","42%","84%","82%","90%","91%","71%","87%","87%","88%","89%","90%","94%","85%","76%","60%","88%","84%","83%","87%","94%","61%","60%","71%","94%","83%","91%","94%","80%","92%"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>id<\/th>\n      <th>title<\/th>\n      <th>year<\/th>\n      <th>genre<\/th>\n      <th>genre_1<\/th>\n      <th>genre_2<\/th>\n      <th>runtime<\/th>\n      <th>critics_score<\/th>\n      <th>audience_score<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="writing-file" class="level4">
<h4 class="anchored" data-anchor-id="writing-file">Writing file</h4>
<p>Saving the dataset to excel file for dashboard creation in Tableau. Note: csv would remove leading zeros in the <code>id</code> column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>movies <span class="sc">%&gt;%</span> writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(<span class="st">"datasets/top_200_movies_2010s_rotten_tomatoes.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="tableau-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="tableau-dashboard">7. Tableau dashboard</h2>
<p>The final dashboard is created in Tableau. It’s actually a jitter plot, which separates overlapping movies with the same critics’ score.</p>
<p>To avoid two filters, one for primary and one for secondary genre, a list parameter is created that filters movies by primary or secondary genre, or “All” values.</p>
<p>For the best viewing experience, please click on the full screen in the bottom right corner.</p>
<p>You can nteract with the dashboard on <a href="https://public.tableau.com/app/profile/sandra.jurela/viz/RottenTomatoes-The200BestMoviesofthe2010s/Dashboard?publish=yes">Tableau Public</a>. Enjoy!</p>
<div class="cell" data-layout-align="center" data-preview="true">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/dashboard.jpg" class="img-fluid figure-img" width="790"></p>
<p></p><figcaption class="figure-caption">Screenshot of the dashboard</figcaption><p></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>